[{"name":"/Start Page","nodes":[{"id":"a4b7e4d4-c01d-1267-30b6-c2b448b90067","type":"Page","parameters":{},"ports":[],"children":[{"id":"fa1b85ca-528a-7bd6-5ffa-b4f8f283d44b","type":"Group","parameters":{"position":"relative","flexDirection":"column","alignItems":"flex-end"},"ports":[],"children":[{"id":"6e3b3953-986d-e707-e1ca-a19855fd02c9","type":"module.inlineHtml","parameters":{"html":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>TON Connect Demo</title>\r\n    <link rel=\"stylesheet\" href=\"./style.css\">\r\n    <script src=\"https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js\"></script>\r\n</head>\r\n<body style=\"padding: 10px; margin: 0\">\r\n    <div id=\"account-info\"></div>\r\n    <button id=\"own-connect-wallet-btn\">Connect Wallet</button>\r\n    <button id=\"own-disconnect-wallet-btn\">Disconnect Wallet</button>\r\n    <button id=\"send-tx-button\">Send tx</button>\r\n    <button id=\"ton-proof-demo\" style=\"display:none;\">Demo Backend</button>\r\n    <select id=\"lang-select\">\r\n        <option value=\"en\">English</option>\r\n        <option value=\"ru\">Russian</option>\r\n    </select>\r\n    <select id=\"theme-select\">\r\n        <option value=\"light\">Light</option>\r\n        <option value=\"dark\">Dark</option>\r\n    </select>\r\n    <select id=\"br-select\">\r\n        <option value=\"small\">Small</option>\r\n        <option value=\"medium\">Medium</option>\r\n        <option value=\"large\">Large</option>\r\n    </select>\r\n    <div id=\"connect-button-root\" style=\"width: fit-content; margin-left: auto\"></div>\r\n    <div id=\"loading\">Loading...</div>\r\n\r\n    <script src=\"./connector.js\"></script>\r\n    <script src=\"./backend-auth.js\"></script>\r\n\r\n    <script>\r\n        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({\r\n            manifestUrl: 'https://gist.githubusercontent.com/romanovichim/e81d599a6f3798bb9f74ab1970a8b376/raw/5f933bd5d24f5979b64ae88421e7849dd144efc1/gistfiletest.txt',\r\n            buttonRootId: 'connect-button-root'\r\n        });\r\n\r\n        tonConnectUI.onStatusChange(wallet => {\r\n            const root = document.getElementById('account-info');\r\n\r\n            if (wallet) {\r\n                const label = document.createElement('span');\r\n                label.innerText = `${wallet.name} Wallet`;\r\n                root.appendChild(label);\r\n\r\n                const img = document.createElement('img');\r\n                img.src = wallet.imageUrl;\r\n                img.height = 40;\r\n                img.width = 40;\r\n                root.appendChild(img);\r\n            } else {\r\n                root.replaceChildren();\r\n            }\r\n        });\r\n\r\n        tonConnectUI.connectionRestored.then(() => document.getElementById('loading').remove());\r\n\r\n        const btn = document.getElementById('send-tx-button');\r\n\r\n        btn.onclick = async () => {\r\n            btn.innerText = 'Loading...';\r\n            btn.disabled = true;\r\n\r\n            try {\r\n                await tonConnectUI.sendTransaction({\r\n                    validUntil: Math.floor(Date.now() / 1000) + 360,\r\n                    messages: [{\r\n                        amount: '1000000',\r\n                        address: 'UQDh5rT_ZS6V-as71tc-sdbBL3vvcyXyLjk52aS_UXwAFQX7'\r\n                    }]\r\n                }, {\r\n                    modals: ['before', 'success', 'error'],\r\n                    notifications: ['before', 'success', 'error'],\r\n                });\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n\r\n            btn.innerText = 'Send tx';\r\n            btn.disabled = false;\r\n        }\r\n\r\n        document.getElementById('own-connect-wallet-btn').onclick = () => {\r\n            tonConnectUI.connectWallet();\r\n        }\r\n\r\n        document.getElementById('own-disconnect-wallet-btn').onclick = () => {\r\n            tonConnectUI.disconnect();\r\n        }\r\n\r\n        const langSelect = document.getElementById('lang-select');\r\n        langSelect.onchange = () => {\r\n            tonConnectUI.uiOptions = {\r\n                language: langSelect.value\r\n            }\r\n        }\r\n\r\n        const themeSelect = document.getElementById('theme-select');\r\n        themeSelect.onchange = () => {\r\n            tonConnectUI.uiOptions = {\r\n                uiPreferences: {\r\n                    theme: themeSelect.value\r\n                }\r\n            }\r\n        }\r\n\r\n        const brSelect = document.getElementById('br-select');\r\n        brSelect.onchange = () => {\r\n            tonConnectUI.uiOptions = {\r\n                uiPreferences: {\r\n                    borderRadius: brSelect.value\r\n                }\r\n            }\r\n        }\r\n\r\n        const demoBackendButton = document.getElementById('ton-proof-demo');\r\n        const backendAuth = new BackendAuth();\r\n        backendAuth.onAccessTokenChange = token => {\r\n            if (token) {\r\n                demoBackendButton.style.display = 'block';\r\n                demoBackendButton.onclick = () => backendAuth.getAccountInfo(tonConnectUI.wallet.account).then(v => alert(JSON.stringify(v)));\r\n            } else {\r\n                demoBackendButton.style.display = 'none';\r\n            }\r\n        }\r\n    </script>\r\n</body>\r\n</html>\r\n","runJs":true},"ports":[],"children":[]}]}]},{"id":"10fa011a-db2f-e573-47e6-ed69e091fbc1","type":"PageInputs","parameters":{},"ports":[],"children":[]}],"connections":[],"ports":[],"roots":["a4b7e4d4-c01d-1267-30b6-c2b448b90067"]}]